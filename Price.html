<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <title>ğŸ“ˆ Ø£Ø³Ø¹Ø§Ø± Ø§Ù„Ø£Ø³Ù‡Ù… Ø§Ù„Ù…ÙØ¶Ù„Ø©</title>
  <style>
    body { font-family: Tahoma; background: #eef2f7; padding: 20px; }
    table { width: 100%; border-collapse: collapse; background: white; border: 1px solid #ccc; }
    th, td { padding: 10px; border: 1px solid #ccc; text-align: center; }
    th { background-color: #0a3e7d; color: white; }
    h2 { color: #0a3e7d; margin-bottom: 20px; }
    .error { color: red; }
  </style>
</head>
<body>

<h2>ğŸ“Š Ø£Ø³Ø¹Ø§Ø± Ø§Ù„Ø£Ø³Ù‡Ù… Ø§Ù„Ù…ÙØ¶Ù„Ø© (ØªØ­Ø¯ÙŠØ« Ù…Ø¨Ø§Ø´Ø±)</h2>

<table>
  <thead>
    <tr>
      <th>Ø§Ù„Ø±Ù…Ø²</th>
      <th>Ø§Ù„Ø§Ø³Ù…</th>
      <th>Ø§Ù„Ø³Ø¹Ø±</th>
      <th>Ø§Ù„ØªØºÙŠØ±</th>
      <th>Ø§Ù„Ù†Ø³Ø¨Ø©</th>
      <th>Ø§Ù„Ø³ÙˆÙ‚</th>
    </tr>
  </thead>
  <tbody id="stock-body">
    <tr><td colspan="6">ğŸ”„ Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª...</td></tr>
  </tbody>
</table>

<script>
const apiKey = '2d42eaedb65c4d268aa695a0be7ca703'; // ğŸ”‘ Ø§Ø³ØªØ¨Ø¯Ù„Ù‡ Ø¨Ù…ÙØªØ§Ø­ TwelveData

const symbols = [
  'ADIB.AE','ADIB.AE','ADIB.AE',
  'DIB.DU','DIB.DU',
  'EMAAR.DU','AIRARABIA.DU',
  'DANA.DU','DANA.DU',
  'ADNOCDIST.AE','ADNOCDIST.AE',
  'EAND.DU','EAND.DU',
  'MULTIPLY.AE','LULU.AE'
];

async function fetchStockData() {
  const tbody = document.getElementById('stock-body');
  tbody.innerHTML = '';

  for (let symbol of symbols) {
    try {
      const response = await fetch(`https://api.twelvedata.com/quote?symbol=${symbol}&apikey=${apiKey}`);
      const data = await response.json();

      const row = document.createElement('tr');

      if (!data.code) {
        row.innerHTML = `
          <td>${data.symbol}</td>
          <td>${data.name || '-'}</td>
          <td>${data.price || '-'}</td>
          <td>${data.change || '-'}</td>
          <td>${data.percent_change ? data.percent_change + '%' : '-'}</td>
          <td>${data.exchange || '-'}</td>
        `;
      } else {
        row.innerHTML = `<td colspan="6" class="error">âš ï¸ ${symbol}: ${data.message}</td>`;
      }

      tbody.appendChild(row);
    } catch (error) {
      const errorRow = document.createElement('tr');
      errorRow.innerHTML = `<td colspan="6" class="error">âŒ ÙØ´Ù„ ØªØ­Ù…ÙŠÙ„ ${symbol}</td>`;
      tbody.appendChild(errorRow);
    }
  }
}

fetchStockData();
setInterval(fetchStockData, 60000); // ØªØ­Ø¯ÙŠØ« ÙƒÙ„ Ø¯Ù‚ÙŠÙ‚Ø©
</script>

</body>
</html>
