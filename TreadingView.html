<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <title>Ù…Ù†ØµØ© Ù…Ø­ÙØ¸ØªÙŠ â€“ Ù†Ø³Ø®Ø© Ù…Ø­Ø¯Ù‘Ø«Ø©</title>
  <style>
    body {font-family: Arial, sans-serif; margin: 20px; background:#f9f9f9;}
    h1 {text-align:center;}
    table {border-collapse: collapse; width: 100%; margin-top: 20px;}
    th, td {border: 1px solid #ccc; padding: 8px; text-align: center;}
    th {background: #333; color: white;}
    .controls {margin: 10px 0;}
    select, input {padding: 5px; margin: 5px;}
    .hidden {display: none;}
  </style>
</head>
<body>
  <h1>ğŸ“Š Ù…Ù†ØµØ© Ù…Ø­ÙØ¸ØªÙŠ</h1>

  <div class="controls">
    <label>Ø§Ø®ØªØ± Ø§Ù„Ø±Ù…Ø² Ù„ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø³Ø¹Ø±:</label>
    <select id="symbolSelect"></select>
    <input type="number" id="newPrice" placeholder="Ø§ÙƒØªØ¨ Ø§Ù„Ø³Ø¹Ø± Ø§Ù„Ø¬Ø¯ÙŠØ¯">
    <button onclick="updatePrice()">ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø³Ø¹Ø±</button>

    <br>
    <label>Ø¥Ø¸Ù‡Ø§Ø±/Ø¥Ø®ÙØ§Ø¡ Ø§Ù„Ø£Ø¹Ù…Ø¯Ø©:</label>
    <select id="columnToggle" onchange="toggleColumn()">
      <option value="">-- Ø§Ø®ØªØ± Ø¹Ù…ÙˆØ¯ --</option>
    </select>
  </div>

  <table id="portfolio">
    <thead>
      <tr>
        <th>Ø±Ù…Ø²</th>
        <th>Ø§Ù„ÙƒÙ…ÙŠØ©</th>
        <th>Ø³Ø¹Ø± Ø§Ù„Ø´Ø±Ø§Ø¡</th>
        <th>Ø§Ù„Ø¹Ù…ÙˆÙ„Ø©</th>
        <th>Ø§Ù„Ø¶Ø±ÙŠØ¨Ø©</th>
        <th>Ù…Ø¨Ù„Øº Ø§Ù„ØªØ¯Ø§ÙˆÙ„</th>
        <th>Ø³Ø¹Ø± Ø§Ù„Ø´Ø±Ø§Ø¡ Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠ</th>
        <th>Ø§Ù„ØªØ§Ø±ÙŠØ®</th>
        <th>Ø³Ø¹Ø± Ø§Ù„Ø³ÙˆÙ‚</th>
        <th>Ø§Ù„ØªÙƒÙ„ÙØ©</th>
        <th>Ø§Ù„Ù‚ÙŠÙ…Ø©</th>
        <th>Ø§Ù„Ø±Ø¨Ø­</th>
        <th>Ø§Ù„ØªØºÙŠÙŠØ± %</th>
      </tr>
    </thead>
    <tbody id="portfolioBody"></tbody>
  </table>

<script>
const data = [
  {symbol:'ADIB', qty:200, buy:21.6, fee:6.48, tax:0.324, trade:4326.8040, real:21.63402, date:'2025-07-04'},
  {symbol:'ADIB', qty:79, buy:12.72, fee:1.50732, tax:0.075, trade:1006.4627, real:12.740034, date:'2024-10-01'},
  {symbol:'ADIB', qty:20, buy:8.98, fee:0.2694, tax:0.013, trade:179.8829, real:8.9941435, date:'2022-10-13'},
  {symbol:'DIB', qty:100, buy:5.92, fee:12.2, tax:0.61, trade:604.8034, real:6.048034, date:'2022-09-26'},
  {symbol:'DIB', qty:340, buy:5.93, fee:16.3, tax:0.813, trade:2033.2818, real:5.98024, date:'2022-10-25'},
  {symbol:'Emmar', qty:100, buy:6.23, fee:12.3, tax:0.614, trade:635.8965, real:6.358965, date:'2022-11-08'},
  {symbol:'AIRARABIA', qty:300, buy:2.08, fee:12.3, tax:0.614, trade:636.8995, real:2.123, date:'2022-11-08'},
  {symbol:'DANA', qty:600, buy:0.916, fee:0.8244, tax:0.041, trade:550.4656, real:0.91744, date:'2022-11-15'},
  {symbol:'DANA', qty:600, buy:0.918, fee:0.8262, tax:0.041, trade:551.6675, real:0.91945, date:'2022-11-10'},
  {symbol:'ADNOCDIST', qty:200, buy:4.48, fee:1.344, tax:0.067, trade:897.4112, real:4.487056, date:'2022-11-08'},
  {symbol:'ADNOCDIST', qty:100, buy:4.25, fee:0.6375, tax:0.032, trade:425.6694, real:4.256694, date:'2022-10-13'},
  {symbol:'EAND', qty:20, buy:23.7, fee:0.711, tax:0.036, trade:474.7466, real:23.7373, date:'2022-09-26'},
  {symbol:'EAND', qty:15, buy:25.46, fee:0.57285, tax:0.029, trade:382.5015, real:25.5001, date:'2022-11-08'},
  {symbol:'MULTIPLY', qty:200, buy:4.88, fee:1.464, tax:0.073, trade:977.5372, real:4.887686, date:'2022-11-14'},
  {symbol:'LULU', qty:1065, buy:2.04, fee:0, tax:0, trade:2172.6, real:2.04, date:'2022-11-13'},
  {symbol:'DIB', qty:200, buy:9.78, fee:15.38, tax:0.769, trade:1972.149, real:9.860745, date:'2025-07-29'},
  {symbol:'DIB', qty:300, buy:9.67, fee:17.98, tax:0.899, trade:2919.879, real:9.73293, date:'2025-07-29'},
  {symbol:'DUBAIRESI', qty:700, buy:1.27, fee:12.44, tax:0.622, trade:902.062, real:1.28866, date:'2025-07-30'},
  {symbol:'DIB', qty:940, buy:9.99, fee:35.83, tax:1.56, trade:9427.99, real:10.02978, date:'2025-08-05'},
  {symbol:'DIB', qty:950, buy:9.99, fee:36.1, tax:1.56, trade:9528.16, real:10.02964, date:'2025-08-05'},
  {symbol:'ALDAR', qty:104, buy:9.6, fee:1.5, tax:0.07, trade:999.97, real:9.6151, date:'2025-08-05'},
  {symbol:'DUBAIRESI', qty:7000, buy:1.39, fee:36.76, tax:1.6, trade:9768.36, real:1.39548, date:'2025-08-08'},
  {symbol:'DIB', qty:1000, buy:9.66, fee:36.57, tax:1.58, trade:9698.15, real:9.69815, date:'2025-08-08'},
  {symbol:'DIB', qty:1020, buy:9.75, fee:37.35, tax:1.62, trade:9983.97, real:9.78821, date:'2025-08-15'},
  {symbol:'SIB', qty:3300, buy:3.02, fee:14.95, tax:0.74, trade:9981.69, real:3.02475, date:'2025-08-15'},
  {symbol:'RAKPROP', qty:6450, buy:1.55, fee:15, tax:0.76, trade:10013.26, real:1.55244, date:'2025-08-15'},
  {symbol:'ADNOCDRILL', qty:1776, buy:5.63, fee:15, tax:0.76, trade:10014.64, real:5.63887, date:'2025-08-15'}
];

function render() {
  const body = document.getElementById('portfolioBody');
  body.innerHTML = '';
  data.forEach((row, i) => {
    let cost = row.real * row.qty;
    let value = (row.marketPrice || row.real) * row.qty;
    let profit = value - cost;
    let change = (cost === 0) ? 0 : (profit / cost) * 100;
    body.innerHTML += `
      <tr>
        <td>${row.symbol}</td>
        <td>${row.qty}</td>
        <td>${row.buy.toFixed(2)}</td>
        <td>${row.fee.toFixed(2)}</td>
        <td>${row.tax.toFixed(3)}</td>
        <td>${row.trade.toFixed(2)}</td>
        <td>${row.real.toFixed(4)}</td>
        <td>${row.date}</td>
        <td>${row.marketPrice ? row.marketPrice.toFixed(2) : '-'}</td>
        <td>${cost.toFixed(2)}</td>
        <td>${value.toFixed(2)}</td>
        <td>${profit.toFixed(2)}</td>
        <td>${change.toFixed(2)}%</td>
      </tr>`;
  });
}

function initControls() {
  const symbolSelect = document.getElementById('symbolSelect');
  const uniqueSymbols = [...new Set(data.map(r => r.symbol))];
  uniqueSymbols.forEach(sym => {
    let opt = document.createElement('option');
    opt.value = sym; opt.textContent = sym;
    symbolSelect.appendChild(opt);
  });

  const header = document.querySelectorAll('#portfolio thead th');
  const colToggle = document.getElementById('columnToggle');
  header.forEach((th, idx) => {
    let opt = document.createElement('option');
    opt.value = idx; opt.textContent = th.textContent;
    colToggle.appendChild(opt);
  });
}

function updatePrice() {
  const sym = document.getElementById('symbolSelect').value;
  const price = parseFloat(document.getElementById('newPrice').value);
  if(!sym || isNaN(price)) return;
  data.forEach(row => {
    if(row.symbol === sym) row.marketPrice = price;
  });
  render();
}

function toggleColumn() {
  const colIndex = document.getElementById('columnToggle').value;
  if(colIndex === '') return;
  const table = document.getElementById('portfolio');
  for (let r of table.rows) {
    if (r.cells[colIndex]) {
      r.cells[colIndex].style.display = r.cells[colIndex].style.display === 'none' ? '' : 'none';
    }
  }
}

initControls();
render();
</script>
</body>
</html>
